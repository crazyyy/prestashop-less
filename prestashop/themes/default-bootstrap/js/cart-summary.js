function cleanSelectAddressDelivery(){void 0!==window.ajaxCart&&$.each($(".cart_address_delivery"),function(t,e){var r=$(e).find("option"),a=0,n=$(e).attr("id").split("_"),i=n[3],o=n[4],c=n[5];$.each(r,function(t){$(r[t]).val()>0&&(0==$("#product_"+i+"_"+o+"_0_"+$(r[t]).val()).length||c==$(r[t]).val())&&a++}),2>a?$($(e).find("option[value=-2]")).remove():0==$($(e).find("option[value=-2]")).length&&$(e).append($('<option value="-2">'+ShipToAnOtherAddress+"</option>"))})}function changeAddressDelivery(t){var e=t.attr("id").split("_"),r=e[3],a=e[4],n=e[5],i=t.val();if(i!=n){if(i>0)$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&changeAddressDelivery=1&summary=1&id_product="+r+"&id_product_attribute="+a+"&old_id_address_delivery="+n+"&new_id_address_delivery="+i+"&token="+static_token+"&allow_refresh=1",success:function(t){"undefined"!=typeof t.hasErrors&&t.hasErrors?($.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+t.error+"</p>"}],{padding:0}):alert(t.error),$("#select_address_delivery_"+r+"_"+a+"_"+n).val(n)):($("#product_"+r+"_"+a+"_0_"+i).length&&(updateCartSummary(t.summary),void 0!=window.ajaxCart&&ajaxCart.updateCart(t),updateCustomizedDatas(t.customizedDatas),updateHookShoppingCart(t.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(t.HOOK_SHOPPING_CART_EXTRA),"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate(),$("#product_"+r+"_"+a+"_0_"+n).remove(),$(".product_"+r+"_"+a+"_0_"+n).remove()),void 0!=window.ajaxCart&&ajaxCart.updateCart(t),updateAddressId(r,a,n,i),cleanSelectAddressDelivery())}});else if(-1==i)window.location=$($(".address_add a")[0]).attr("href");else if(-2==i){if(0==n)return $.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+txtSelectAnAddressFirst+"</p>"}],{padding:0}):alert(txtSelectAnAddressFirst),!1;var o=0,c=$("#select_address_delivery_"+r+"_"+a+"_"+n+" option");$.each(c,function(t){return $(c[t]).val()>0&&$(c[t]).val()!==n&&0==$("#product_"+r+"_"+a+"_0_"+$(c[t]).val()).length?(o=$(c[t]).val(),!1):void 0}),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",context:t,data:"controller=cart&ajax=true&duplicate=true&summary=true&id_product="+r+"&id_product_attribute="+a+"&id_address_delivery="+n+"&new_id_address_delivery="+o+"&token="+static_token+"&allow_refresh=1",success:function(t){t.error&&$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+t.error+"</p>"}],{padding:0}):alert(t.error);var e=$("#product_"+r+"_"+a+"_0_"+n),i=e.clone();updateAddressId(r,a,n,o,i),e.after(i),i.find("input[name=quantity_"+r+"_"+a+"_0_"+n+"_hidden]").val(1),i.find(".cart_quantity_input").val(1),$("#select_address_delivery_"+r+"_"+a+"_"+n).val(n),$("#select_address_delivery_"+r+"_"+a+"_"+o).val(o),cleanSelectAddressDelivery(),updateCartSummary(t.summary),void 0!==window.ajaxCart&&ajaxCart.updateCart(t)}})}return!0}}function updateAddressId(t,e,r,a,n){("undefined"==typeof n||0==n.length)&&(n=$("#cart_summary tr[id^=product_"+t+"_"+e+"_0_], #cart_summary tr[id^=product_"+t+"_"+e+"_nocustom_]")),$(".product_customization_for_"+t+"_"+e+"_"+r).each(function(){$(this).attr("id",$(this).attr("id").replace(/_\d+$/,"_"+a)).removeClass("product_customization_for_"+t+"_"+e+"_"+r+" address_"+r).addClass("product_customization_for_"+t+"_"+e+"_"+a+" address_"+a),$(this).find("input[name^=quantity_]").each(function(){"undefined"!=typeof $(this).attr("name")&&$(this).attr("name",$(this).attr("name").replace(/_\d+(_hidden|)$/,"_"+a))}),$(this).find("a").each(function(){"undefined"!=typeof $(this).attr("href")&&$(this).attr("href",$(this).attr("href").replace(/id_address_delivery=\d+/,"id_address_delivery="+a))})}),n.attr("id",n.attr("id").replace(/_\d+$/,"_"+a)).removeClass("address_"+r).addClass("address_"+a).find("span[id^=cart_quantity_custom_], span[id^=total_product_price_], input[name^=quantity_], .cart_quantity_down, .cart_quantity_up, .cart_quantity_delete").each(function(){"undefined"!=typeof $(this).attr("name")&&$(this).attr("name",$(this).attr("name").replace(/_\d+(_hidden|)$/,"_"+a)),"undefined"!=typeof $(this).attr("id")&&$(this).attr("id",$(this).attr("id").replace(/_\d+$/,"_"+a)),"undefined"!=typeof $(this).attr("href")&&$(this).attr("href",$(this).attr("href").replace(/id_address_delivery=\d+/,"id_address_delivery="+a))}),n.find("#select_address_delivery_"+t+"_"+e+"_"+r).attr("id","select_address_delivery_"+t+"_"+e+"_"+a),void 0!==window.ajaxCart&&$("#cart_block_list dd, #cart_block_list dt").each(function(){"undefined"!=typeof $(this).attr("id")&&$(this).attr("id",$(this).attr("id").replace(/_\d+$/,"_"+a))})}function updateQty(t,e,r){var a="";a="undefined"==typeof e||e?"#order-detail-content ":"#fancybox-content ";var n=$(r).attr("name"),i=new RegExp("^[0-9]+$");if(1==i.test(t)){var o=$(a+"input[name="+n+"_hidden]").val(),c=$(a+"input[name="+n+"]").val(),d=parseInt(c)-parseInt(o);parseInt(d)>0?upQuantity(n.replace("quantity_",""),d):parseInt(d)<0&&downQuantity(n.replace("quantity_",""),d)}else $(a+"input[name="+n+"]").val($(a+"input[name="+n+"_hidden]").val());"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate()}function deleteProductFromSummary(t){var e=0,r=0,a=0,n=0,o=0;o=t.split("_"),r=parseInt(o[0]),"undefined"!=typeof o[1]&&(a=parseInt(o[1])),"undefined"!=typeof o[2]&&"nocustom"!==o[2]&&(e=parseInt(o[2])),"undefined"!=typeof o[3]&&(n=parseInt(o[3])),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&delete=true&summary=true&id_product="+r+"&ipa="+a+"&id_address_delivery="+n+(0!==e?"&id_customization="+e:"")+"&token="+static_token+"&allow_refresh=1",success:function(o){if(o.hasError){var c="";for(var d in o.errors)"indexOf"!==d&&(c+=o.errors[d]+"\n")}else{if(o.refresh&&location.reload(),0==parseInt(o.summary.products.length))"undefined"==typeof orderProcess||"order-opc"!==orderProcess?document.location.href=document.location.href:($("#center_column").children().each(function(){"emptyCartWarning"!==$(this).attr("id")&&"breadcrumb"!==$(this).attr("class")&&"cart_title"!==$(this).attr("id")&&$(this).fadeOut("slow",function(){$(this).remove()})}),$("#summary_products_label").remove(),$("#emptyCartWarning").fadeIn("slow"));else{$("#product_"+t).fadeOut("slow",function(){$(this).remove(),cleanSelectAddressDelivery(),e||refreshOddRow()});var u=!1;for(i=0;i<o.summary.products.length;i++)o.summary.products[i].id_product==r&&o.summary.products[i].id_product_attribute==a&&o.summary.products[i].id_address_delivery==n&&parseInt(o.summary.products[i].customization_quantity)>0&&(u=!0);!u&&e&&$("#product_"+r+"_"+a+"_0_"+n).fadeOut("slow",function(){$(this).remove();var t=$("#product_"+r+"_"+a+"_nocustom_"+n);t.length>0&&(t.find("input[name^=quantity_], .cart_quantity_down, .cart_quantity_up, .cart_quantity_delete").each(function(){"undefined"!=typeof $(this).attr("name")&&$(this).attr("name",$(this).attr("name").replace(/nocustom/,"0")),"undefined"!=typeof $(this).attr("id")&&$(this).attr("id",$(this).attr("id").replace(/nocustom/,"0"))}),t.find("span[id^=total_product_price_]").each(function(){$(this).attr("id",$(this).attr("id").replace(/_nocustom/,""))}),t.attr("id",t.attr("id").replace(/nocustom/,"0"))),refreshOddRow()})}updateCartSummary(o.summary),void 0!=window.ajaxCart&&ajaxCart.updateCart(o),updateCustomizedDatas(o.customizedDatas),updateHookShoppingCart(o.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(o.HOOK_SHOPPING_CART_EXTRA),"undefined"!=typeof getCarrierListAndUpdate&&o.summary.products.length>0&&getCarrierListAndUpdate(),"undefined"!=typeof updatePaymentMethodsDisplay&&updatePaymentMethodsDisplay()}},error:function(t,e,r){if("abort"!==e){var a="TECHNICAL ERROR: unable to save update quantity \n\nDetails:\nError thrown: "+t+"\nText status: "+e;$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+a+"</p>"}],{padding:0}):alert(a)}}})}function refreshOddRow(){var t="odd",e="even";$.each($(".cart_item"),function(r,a){0==r&&($(this).hasClass("even")&&(t="even",e="odd"),$(this).addClass("first_item")),r%2?$(this).removeClass(t).addClass(e):$(this).removeClass(e).addClass(t)}),$(".cart_item:last-child, .customization:last-child").addClass("last_item")}function upQuantity(t,e){"undefined"!=typeof e&&e||(e=1);var r=0,a=0,n=0,i=0,o=0;o=t.split("_"),a=parseInt(o[0]),"undefined"!=typeof o[1]&&(n=parseInt(o[1])),"undefined"!=typeof o[2]&&"nocustom"!==o[2]&&(r=parseInt(o[2])),"undefined"!=typeof o[3]&&(i=parseInt(o[3])),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&add=true&getproductprice=true&summary=true&id_product="+a+"&ipa="+n+"&id_address_delivery="+i+(0!==r?"&id_customization="+r:"")+"&qty="+e+"&token="+static_token+"&allow_refresh=1",success:function(e){if(e.hasError){var a="";for(var n in e.errors)"indexOf"!==n&&(a+=$("<div />").html(e.errors[n]).text()+"\n");$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+a+"</p>"}],{padding:0}):alert(a),$("input[name=quantity_"+t+"]").val($("input[name=quantity_"+t+"_hidden]").val())}else e.refresh&&location.reload(),updateCartSummary(e.summary),void 0!=window.ajaxCart&&ajaxCart.updateCart(e),0!==r&&updateCustomizedDatas(e.customizedDatas),updateHookShoppingCart(e.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(e.HOOK_SHOPPING_CART_EXTRA),"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate(),"undefined"!=typeof updatePaymentMethodsDisplay&&updatePaymentMethodsDisplay()},error:function(t,e,r){"abort"!==e&&(error="TECHNICAL ERROR: unable to save update quantity \n\nDetails:\nError thrown: "+t+"\nText status: "+e,$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+error+"</p>"}],{padding:0}):alert(error))}})}function downQuantity(t,e){var r=$("input[name=quantity_"+t+"]").val(),a=r;"undefined"!=typeof e&&e?0>e&&(e=-e):(e=1,a=r-1);var n=0,i=0,o=0,c=0,d=0;d=t.split("_"),i=parseInt(d[0]),"undefined"!=typeof d[1]&&(o=parseInt(d[1])),"undefined"!=typeof d[2]&&"nocustom"!==d[2]&&(n=parseInt(d[2])),"undefined"!=typeof d[3]&&(c=parseInt(d[3])),a>0||$("#product_"+t+"_gift").length?$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&add=true&getproductprice=true&summary=true&id_product="+i+"&ipa="+o+"&id_address_delivery="+c+"&op=down"+(0!==n?"&id_customization="+n:"")+"&qty="+e+"&token="+static_token+"&allow_refresh=1",success:function(e){if(e.hasError){var r="";for(var i in e.errors)"indexOf"!==i&&(r+=$("<div />").html(e.errors[i]).text()+"\n");$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+r+"</p>"}],{padding:0}):alert(r),$("input[name=quantity_"+t+"]").val($("input[name=quantity_"+t+"_hidden]").val())}else e.refresh&&location.reload(),updateCartSummary(e.summary),void 0!==window.ajaxCart&&ajaxCart.updateCart(e),0!==n&&updateCustomizedDatas(e.customizedDatas),updateHookShoppingCart(e.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(e.HOOK_SHOPPING_CART_EXTRA),0==a&&$("#product_"+t).hide(),"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate(),"undefined"!=typeof updatePaymentMethodsDisplay&&updatePaymentMethodsDisplay()},error:function(t,e,r){"abort"!==e&&alert("TECHNICAL ERROR: unable to save update quantity \n\nDetails:\nError thrown: "+t+"\nText status: "+e)}}):deleteProductFromSummary(t)}function updateCartSummary(t){var e,r=0,a=new Array;if("undefined"!=typeof t){for($("div.alert-danger").fadeOut(),e=0;e<t.products.length;e++)a[t.products[e].id_product+"_"+t.products[e].id_product_attribute+"_"+t.products[e].id_address_delivery]=t.products[e];if($(".multishipping-cart:visible").length)for(e=0;e<t.gift_products.length;e++)"undefined"==typeof a[t.gift_products[e].id_product+"_"+t.gift_products[e].id_product_attribute+"_"+t.gift_products[e].id_address_delivery]&&(a[t.gift_products[e].id_product+"_"+t.gift_products[e].id_product_attribute+"_"+t.gift_products[e].id_address_delivery]=t.gift_products[e]);else for(e=0;e<t.gift_products.length;e++)"undefined"!=typeof a[t.gift_products[e].id_product+"_"+t.gift_products[e].id_product_attribute+"_"+t.gift_products[e].id_address_delivery]&&(a[t.gift_products[e].id_product+"_"+t.gift_products[e].id_product_attribute+"_"+t.gift_products[e].id_address_delivery].quantity-=t.gift_products[e].cart_quantity);for(e in a){var n=a[e].reduction_applies,i="";initial_price="","undefined"!=typeof a[e].price_without_quantity_discount&&(initial_price=formatCurrency(a[e].price_without_quantity_discount,currencyFormat,currencySign,currencyBlank)),priceReductionPercent=ps_round((ps_round(a[e].price_without_quantity_discount)-ps_round(a[e].price_wt))/ps_round(a[e].price_without_quantity_discount)*-100);var o="";o=0!==priceDisplayMethod?formatCurrency(a[e].price,currencyFormat,currencySign,currencyBlank):formatCurrency(a[e].price_wt,currencyFormat,currencySign,currencyBlank),n&&"undefined"!=typeof initial_price&&""!==initial_price&&a[e].price_without_quantity_discount>a[e].price&&(i='<span class="price-percent-reduction small">'+priceReductionPercent+'%</span><span class="old-price">'+initial_price+"</span>");var c=a[e].id_product+"_"+a[e].id_product_attribute+"_"+a[e].id_address_delivery,d=a[e].id_product+"_"+a[e].id_product_attribute+"_"+(a[e].id_customization&&a[e].quantity_without_customization!=a[e].quantity?"nocustom":"0")+"_"+a[e].id_address_delivery;0!==priceDisplayMethod?($("#product_price_"+c).html('<span class="price">'+o+"</span>"+i),"undefined"!=typeof a[e].customizationQuantityTotal&&a[e].customizationQuantityTotal>0?$("#total_product_price_"+c).html(formatCurrency(a[e].total_customization,currencyFormat,currencySign,currencyBlank)):$("#total_product_price_"+c).html(formatCurrency(a[e].total,currencyFormat,currencySign,currencyBlank)),a[e].quantity_without_customization!=a[e].quantity&&$("#total_product_price_"+d).html(formatCurrency(a[e].total,currencyFormat,currencySign,currencyBlank))):($("#product_price_"+c).html('<span class="price">'+o+"</span>"+i),"undefined"!=typeof a[e].customizationQuantityTotal&&a[e].customizationQuantityTotal>0?$("#total_product_price_"+c).html(formatCurrency(a[e].total_customization_wt,currencyFormat,currencySign,currencyBlank)):$("#total_product_price_"+c).html(formatCurrency(a[e].total_wt,currencyFormat,currencySign,currencyBlank)),a[e].quantity_without_customization!=a[e].quantity&&$("#total_product_price_"+d).html(formatCurrency(a[e].total_wt,currencyFormat,currencySign,currencyBlank))),$("input[name=quantity_"+d+"]").val(a[e].id_customization?a[e].quantity_without_customization:a[e].cart_quantity),$("input[name=quantity_"+d+"_hidden]").val(a[e].id_customization?a[e].quantity_without_customization:a[e].cart_quantity),"undefined"!=typeof a[e].customizationQuantityTotal&&a[e].customizationQuantityTotal>0&&$("#cart_quantity_custom_"+c).html(a[e].customizationQuantityTotal),r+=parseInt(a[e].quantity)}var u=0;for(var s in t.discounts){u++;break}u?(0==$(".cart_discount").length&&location.reload(),0!==priceDisplayMethod?$("#total_discount").html("-"+formatCurrency(t.total_discounts_tax_exc,currencyFormat,currencySign,currencyBlank)):$("#total_discount").html("-"+formatCurrency(t.total_discounts,currencyFormat,currencySign,currencyBlank)),$(".cart_discount").each(function(){var e=$(this).attr("id").replace("cart_discount_",""),r=!0;for(var a in t.discounts)t.discounts[a].id_discount==e&&("!"!==t.discounts[a].value_real&&(0!==priceDisplayMethod?$("#cart_discount_"+e+" td.cart_discount_price span.price-discount").html(formatCurrency(-1*t.discounts[a].value_tax_exc,currencyFormat,currencySign,currencyBlank)):$("#cart_discount_"+e+" td.cart_discount_price span.price-discount").html(formatCurrency(-1*t.discounts[a].value_real,currencyFormat,currencySign,currencyBlank))),r=!1);r&&$("#cart_discount_"+e+", #cart_total_voucher").fadeTo("fast",0,function(){$(this).remove()})})):($(".cart_discount").each(function(){$(this).remove()}),$(".cart_total_voucher").remove()),$("#cart_block_shipping_cost").show(),$("#cart_block_shipping_cost").next().show(),t.total_shipping>0?0!==priceDisplayMethod?($("#cart_block_shipping_cost").html(formatCurrency(t.total_shipping_tax_exc,currencyFormat,currencySign,currencyBlank)),$("#cart_block_wrapping_cost").html(formatCurrency(t.total_wrapping_tax_exc,currencyFormat,currencySign,currencyBlank)),$("#cart_block_total").html(formatCurrency(t.total_price_without_tax,currencyFormat,currencySign,currencyBlank))):($("#cart_block_shipping_cost").html(formatCurrency(t.total_shipping,currencyFormat,currencySign,currencyBlank)),$("#cart_block_wrapping_cost").html(formatCurrency(t.total_wrapping,currencyFormat,currencySign,currencyBlank)),$("#cart_block_total").html(formatCurrency(t.total_price,currencyFormat,currencySign,currencyBlank))):null==t.carrier.id&&($("#cart_block_shipping_cost").hide(),$("#cart_block_shipping_cost").next().hide()),$("#cart_block_tax_cost").html(formatCurrency(t.total_tax,currencyFormat,currencySign,currencyBlank)),$(".ajax_cart_quantity").html(r),$("#summary_products_quantity").html(r+" "+(r>1?txtProducts:txtProduct)),0!==priceDisplayMethod?$("#total_product").html(formatCurrency(t.total_products,currencyFormat,currencySign,currencyBlank)):$("#total_product").html(formatCurrency(t.total_products_wt,currencyFormat,currencySign,currencyBlank)),$("#total_price").html(formatCurrency(t.total_price,currencyFormat,currencySign,currencyBlank)),$("#total_price_without_tax").html(formatCurrency(t.total_price_without_tax,currencyFormat,currencySign,currencyBlank)),$("#total_tax").html(formatCurrency(t.total_tax,currencyFormat,currencySign,currencyBlank)),$(".cart_total_delivery").show(),t.total_shipping>0?0!==priceDisplayMethod?$("#total_shipping").html(formatCurrency(t.total_shipping_tax_exc,currencyFormat,currencySign,currencyBlank)):$("#total_shipping").html(formatCurrency(t.total_shipping,currencyFormat,currencySign,currencyBlank)):null!=t.carrier.id?$("#total_shipping").html(freeShippingTranslation):$(".cart_total_delivery").hide(),t.free_ship>0&&!t.is_virtual_cart?($(".cart_free_shipping").fadeIn(),$("#free_shipping").html(formatCurrency(t.free_ship,currencyFormat,currencySign,currencyBlank))):$(".cart_free_shipping").hide(),t.total_wrapping>0?($("#total_wrapping").html(formatCurrency(t.total_wrapping,currencyFormat,currencySign,currencyBlank)),$("#total_wrapping").parent().show()):($("#total_wrapping").html(formatCurrency(t.total_wrapping,currencyFormat,currencySign,currencyBlank)),$("#total_wrapping").parent().hide())}}function updateCustomizedDatas(t){for(var e in t)for(var r in t[e])for(var a in t[e][r])for(var n in t[e][r][a]){var i=t[e][r][a][n].quantity;$("input[name=quantity_"+e+"_"+r+"_"+n+"_"+a+"_hidden]").val(i),$("input[name=quantity_"+e+"_"+r+"_"+n+"_"+a+"]").val(i)}}function updateHookShoppingCart(t){$("#HOOK_SHOPPING_CART").html(t)}function updateHookShoppingCartExtra(t){$("#HOOK_SHOPPING_CART_EXTRA").html(t)}function refreshDeliveryOptions(){$.each($(".delivery_option_radio"),function(){if($(this).prop("checked")){0==$(this).parent().find(".delivery_option_carrier.not-displayable").length&&$(this).parent().find(".delivery_option_carrier").show();var t=$(this).val().split(",");t.pop();var e=this;$(t).each(function(){$(e).closest(".delivery_options").find('input[value="'+this.toString()+'"]').change()})}else $(this).parent().find(".delivery_option_carrier").hide()})}function updateExtraCarrier(t,e){var r="";r="undefined"!=typeof orderOpcUrl?orderOpcUrl:orderUrl,$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:r+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"ajax=true&method=updateExtraCarrier&id_address="+e+"&id_delivery_option="+t+"&token="+static_token+"&allow_refresh=1",success:function(t){$("#HOOK_EXTRACARRIER_"+e).html(t.content)}})}$(document).ready(function(){$(".cart_quantity_up").off("click").on("click",function(t){t.preventDefault(),upQuantity($(this).attr("id").replace("cart_quantity_up_",""))}),$(".cart_quantity_down").off("click").on("click",function(t){t.preventDefault(),downQuantity($(this).attr("id").replace("cart_quantity_down_",""))}),$(".cart_quantity_delete").off("click").on("click",function(t){t.preventDefault(),deleteProductFromSummary($(this).attr("id"))}),$(".cart_address_delivery").on("change",function(t){changeAddressDelivery($(this))}),$(document).on("click",".voucher_name",function(t){$("#discount_name").val($(this).data("code"))}),$(".cart_quantity_input").typeWatch({highlight:!0,wait:600,captureLength:0,callback:function(t){updateQty(t,!0,this.el)}}),cleanSelectAddressDelivery(),refreshDeliveryOptions(),$(".delivery_option_radio").on("change",function(){refreshDeliveryOptions()}),$("#allow_seperated_package").on("click",function(){$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,data:"controller=cart&ajax=true&allowSeperatedPackage=true&value="+($(this).prop("checked")?"1":"0")+"&token="+static_token+"&allow_refresh=1",success:function(t){"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate()}})}),$("#gift").checkboxChange(function(){$("#gift_div").show("slow")},function(){$("#gift_div").hide("slow")}),$("#enable-multishipping").checkboxChange(function(){$(".standard-checkout").hide(0),$(".multishipping-checkout").show(0)},function(){$(".standard-checkout").show(0),$(".multishipping-checkout").hide(0)})});