function setCountries(){if("undefined"!=typeof countries&&countries){var e=[];for(var n in countries){var t=countries[n].id_country;if("undefined"!=typeof countries[n].states&&countries[n].states&&countries[n].contains_states){e[t]=[];for(var i in countries[n].states)e[parseInt(t)].push({id:parseInt(countries[n].states[i].id_state),name:countries[n].states[i].name})}"undefined"!=typeof countries[n].need_identification_number&&parseInt(countries[n].need_identification_number)>0&&countriesNeedIDNumber.push(parseInt(countries[n].id_country)),"undefined"!=typeof countries[n].need_zip_code&&parseInt(countries[n].need_zip_code)>0&&(countriesNeedZipCode[parseInt(countries[n].id_country)]=countries[n].zip_code_format)}}countries=e}function bindCheckbox(){$("#invoice_address:checked").length>0?($("#opc_invoice_address").slideDown("slow"),""==$("#company_invoice").val()&&$("#vat_number_block_invoice").hide(),bindUniform()):$("#opc_invoice_address").slideUp("slow")}function bindUniform(){$("select.form-control,input[type='radio'],input[type='checkbox']").uniform()}function bindPostcode(){$(document).on("keyup","input[name=postcode]",function(e){$(this).val($(this).val().toUpperCase())})}function bindStateInputAndUpdate(){$(".id_state, .dni, .postcode").css({display:"none"}),updateState(),updateNeedIDNumber(),updateZipCode(),$(document).on("change","#id_country",function(e){updateState(),updateNeedIDNumber(),updateZipCode()}),0!==$("#id_country_invoice").length&&($(document).on("change","#id_country_invoice",function(e){updateState("invoice"),updateNeedIDNumber("invoice"),updateZipCode("invoice")}),updateState("invoice"),updateNeedIDNumber("invoice"),updateZipCode("invoice")),"undefined"!=typeof idSelectedState&&idSelectedState&&$(".id_state option[value="+idSelectedState+"]").prop("selected",!0),"undefined"!=typeof idSelectedStateInvoice&&idSelectedStateInvoice&&$(".id_state_invoice option[value="+idSelectedStateInvoice+"]").prop("selected",!0)}function updateState(e){if($("#id_state"+("undefined"!=typeof e?"_"+e:"")+" option:not(:first-child)").remove(),"undefined"!=typeof countries)var n=countries[parseInt($("#id_country"+("undefined"!=typeof e?"_"+e:"")).val())];"undefined"!=typeof n?($(n).each(function(n,t){$("#id_state"+("undefined"!=typeof e?"_"+e:"")).append('<option value="'+parseInt(t.id)+'">'+t.name+"</option>")}),$(".id_state"+("undefined"!=typeof e?"_"+e:"")+":hidden").fadeIn("slow"),$("#id_state, #id_state_invoice").uniform()):$(".id_state"+("undefined"!=typeof e?"_"+e:"")).fadeOut("fast")}function updateNeedIDNumber(e){var n=parseInt($("#id_country"+("undefined"!=typeof e?"_"+e:"")).val());"undefined"!=typeof countriesNeedIDNumber&&in_array(n,countriesNeedIDNumber)?($(".dni"+("undefined"!=typeof e?"_"+e:"")+":hidden").fadeIn("slow"),$("#dni").uniform()):$(".dni"+("undefined"!=typeof e?"_"+e:"")).fadeOut("fast")}function updateZipCode(e){var n=parseInt($("#id_country"+("undefined"!=typeof e?"_"+e:"")).val());"undefined"!=typeof countriesNeedZipCode&&"undefined"!=typeof countriesNeedZipCode[n]?($(".postcode"+("undefined"!=typeof e?"_"+e:"")+":hidden").fadeIn("slow"),$("#postcode").uniform()):$(".postcode"+("undefined"!=typeof e?"_"+e:"")).fadeOut("fast")}var countriesNeedIDNumber=[],countriesNeedZipCode=[];$(document).ready(function(){setCountries(),bindStateInputAndUpdate(),bindUniform(),bindPostcode(),bindCheckbox(),$(document).on("click","#invoice_address",function(e){bindCheckbox()})});