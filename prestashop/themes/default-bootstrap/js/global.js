function highdpiInit(){if("1px"==$(".replace-2x").css("font-size"))for(var e=$("img.replace-2x").get(),t=0;t<e.length;t++){src=e[t].src,extension=src.substr(src.lastIndexOf(".")+1),src=src.replace("."+extension,"2x."+extension);var i=new Image;i.src=src,0!=i.height?e[t].src=src:e[t].src=e[t].src}}function scrollCompensate(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var l=e.offsetWidth;return i==l&&(l=t.clientWidth),document.body.removeChild(t),i-l}function responsiveResize(){compensante=scrollCompensate(),$(window).width()+scrollCompensate()<=767&&0==responsiveflag?(accordion("enable"),accordionFooter("enable"),responsiveflag=!0):$(window).width()+scrollCompensate()>=768&&(accordion("disable"),accordionFooter("disable"),responsiveflag=!1),"undefined"!=typeof page_name&&in_array(page_name,["category"])&&resizeCatimg()}function blockHover(e){$(document).off("mouseenter").on("mouseenter",".product_list.grid li.ajax_block_product .product-container",function(e){if(1170==$("body").find(".container").width()){var t=$(this).parent().outerHeight(),i=$(this).parent().find(".button-container").outerHeight()+$(this).parent().find(".comments_note").outerHeight()+$(this).parent().find(".functional-buttons").outerHeight();$(this).parent().addClass("hovered").css({height:t+i,"margin-bottom":-1*i})}}),$(document).off("mouseleave").on("mouseleave",".product_list.grid li.ajax_block_product .product-container",function(e){1170==$("body").find(".container").width()&&$(this).parent().removeClass("hovered").css({height:"auto","margin-bottom":"0"})})}function quick_view(){$(document).on("click",".quick-view:visible, .quick-view-mobile:visible",function(e){e.preventDefault();var t=this.rel;t+=-1!=t.indexOf("?")?"&":"?",$.prototype.fancybox&&$.fancybox({padding:0,width:1087,height:610,type:"iframe",href:t+"content_only=1"})})}function bindGrid(){var e=$.totalStorage("display");!e&&"undefined"!=typeof displayList&&displayList&&(e="list"),e&&"grid"!=e?display(e):$(".display").find("li#grid").addClass("selected"),$(document).on("click","#grid",function(e){e.preventDefault(),display("grid")}),$(document).on("click","#list",function(e){e.preventDefault(),display("list")})}function display(e){"list"==e?($("ul.product_list").removeClass("grid").addClass("list row"),$(".product_list > li").removeClass("col-xs-12 col-sm-6 col-md-4").addClass("col-xs-12"),$(".product_list > li").each(function(e,t){html="",html='<div class="product-container"><div class="row">',html+='<div class="left-block col-xs-4 col-xs-5 col-md-4">'+$(t).find(".left-block").html()+"</div>",html+='<div class="center-block col-xs-4 col-xs-7 col-md-4">',html+='<div class="product-flags">'+$(t).find(".product-flags").html()+"</div>",html+='<h5 itemprop="name">'+$(t).find("h5").html()+"</h5>";var i=$(t).find(".comments_note").html();null!=i&&(html+='<div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating" class="comments_note">'+i+"</div>"),html+='<p class="product-desc">'+$(t).find(".product-desc").html()+"</p>";var l=$(t).find(".color-list-container").html();null!=l&&(html+='<div class="color-list-container">'+l+"</div>");var o=$(t).find(".availability").html();null!=o&&(html+='<span class="availability">'+o+"</span>"),html+="</div>",html+='<div class="right-block col-xs-4 col-xs-12 col-md-4"><div class="right-block-content row">';var n=$(t).find(".content_price").html();null!=n&&(html+='<div class="content_price col-xs-5 col-md-12">'+n+"</div>"),html+='<div class="button-container col-xs-7 col-md-12">'+$(t).find(".button-container").html()+"</div>",html+='<div class="functional-buttons clearfix col-sm-12">'+$(t).find(".functional-buttons").html()+"</div>",html+="</div>",html+="</div></div>",$(t).html(html)}),$(".display").find("li#list").addClass("selected"),$(".display").find("li#grid").removeAttr("class"),$.totalStorage("display","list")):($("ul.product_list").removeClass("list").addClass("grid row"),$(".product_list > li").removeClass("col-xs-12").addClass("col-xs-12 col-sm-6 col-md-4"),$(".product_list > li").each(function(e,t){html="",html+='<div class="product-container">',html+='<div class="left-block">'+$(t).find(".left-block").html()+"</div>",html+='<div class="right-block">',html+='<div class="product-flags">'+$(t).find(".product-flags").html()+"</div>",html+='<h5 itemprop="name">'+$(t).find("h5").html()+"</h5>";var i=$(t).find(".comments_note").html();null!=i&&(html+='<div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating" class="comments_note">'+i+"</div>"),html+='<p itemprop="description" class="product-desc">'+$(t).find(".product-desc").html()+"</p>";var l=$(t).find(".content_price").html();null!=l&&(html+='<div class="content_price">'+l+"</div>"),html+='<div itemprop="offers" itemscope itemtype="http://schema.org/Offer" class="button-container">'+$(t).find(".button-container").html()+"</div>";var o=$(t).find(".color-list-container").html();null!=o&&(html+='<div class="color-list-container">'+o+"</div>");var n=$(t).find(".availability").html();null!=n&&(html+='<span class="availability">'+n+"</span>"),html+="</div>",html+='<div class="functional-buttons clearfix">'+$(t).find(".functional-buttons").html()+"</div>",html+="</div>",$(t).html(html)}),$(".display").find("li#grid").addClass("selected"),$(".display").find("li#list").removeAttr("class"),$.totalStorage("display","grid"))}function dropDown(){elementClick="#header .current",elementSlide="ul.toogle_content",activeClass="active",$(elementClick).on("click",function(e){e.stopPropagation();var t=$(this).next(elementSlide);t.is(":hidden")?(t.slideDown(),$(this).addClass(activeClass)):(t.slideUp(),$(this).removeClass(activeClass)),$(elementClick).not(this).next(elementSlide).slideUp(),$(elementClick).not(this).removeClass(activeClass),e.preventDefault()}),$(elementSlide).on("click",function(e){e.stopPropagation()}),$(document).on("click",function(e){e.stopPropagation();var t=$(elementClick).next(elementSlide);$(t).slideUp(),$(elementClick).removeClass("active")})}function accordionFooter(e){"enable"==e?($("#footer .footer-block h4").on("click",function(){$(this).toggleClass("active").parent().find(".toggle-footer").stop().slideToggle("medium")}),$("#footer").addClass("accordion").find(".toggle-footer").slideUp("fast")):($(".footer-block h4").removeClass("active").off().parent().find(".toggle-footer").removeAttr("style").slideDown("fast"),$("#footer").removeClass("accordion"))}function accordion(e){leftColumnBlocks=$("#left_column"),"enable"==e?($("#right_column .block .title_block, #left_column .block .title_block, #left_column #newsletter_block_left h4").on("click",function(){$(this).toggleClass("active").parent().find(".block_content").stop().slideToggle("medium")}),$("#right_column, #left_column").addClass("accordion").find(".block .block_content").slideUp("fast")):($("#right_column .block .title_block, #left_column .block .title_block, #left_column #newsletter_block_left h4").removeClass("active").off().parent().find(".block_content").removeAttr("style").slideDown("fast"),$("#left_column, #right_column").removeClass("accordion"))}function resizeCatimg(){var e=$(".cat_desc").parent("div"),t=new Image;$(t).load(function(){var i=t.width,l=t.height,o=parseFloat(l/i),n=Math.round(o*parseInt(e.outerWidth(!1)));e.css("min-height",n)}),e.length&&(t.src=e.css("background-image").replace(/url\("?|"?\)$/gi,""))}var responsiveflag=!1;$(document).ready(function(){if(highdpiInit(),responsiveResize(),$(window).resize(responsiveResize),navigator.userAgent.match(/Android/i)){var e=document.querySelector('meta[name="viewport"]');e.setAttribute("content","initial-scale=1.0,maximum-scale=1.0,user-scalable=0,width=device-width,height=device-height"),window.scrollTo(0,1)}blockHover(),$("header .callback-js").click(function(){$("header .callback-popup").slideToggle()}),$("footer .callback-js").click(function(){$("footer .callback-popup").slideToggle()}),"undefined"!=typeof quickView&&quickView&&quick_view(),dropDown(),"undefined"==typeof page_name||in_array(page_name,["index","product"])||(bindGrid(),$(document).on("change",".selectProductSort",function(e){if("undefined"!=typeof request&&request)var t=request;var i=$(this).val().split(":");"undefined"!=typeof t&&t&&(document.location.href=t+(t.indexOf("?")<0?"?":"&")+"orderby="+i[0]+"&orderway="+i[1])}),$(document).on("change",'select[name="n"]',function(){$(this.form).submit()}),$(document).on("change",'select[name="manufacturer_list"], select[name="supplier_list"]',function(){""!=this.value&&(location.href=this.value)}),$(document).on("change",'select[name="currency_payement"]',function(){setCurrency($(this).val())})),$(document).on("click",".back",function(e){e.preventDefault(),history.back()}),jQuery.curCSS=jQuery.css,$.prototype.cluetip&&$("a.cluetip").cluetip({local:!0,cursor:"pointer",dropShadow:!1,dropShadowSteps:0,showTitle:!1,tracking:!0,sticky:!1,mouseOutClose:!0,fx:{open:"fadeIn",openSpeed:"fast"}}).css("opacity",.8),$.prototype.fancybox&&$.extend($.fancybox.defaults.tpl,{closeBtn:'<a title="'+FancyboxI18nClose+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="'+FancyboxI18nNext+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="'+FancyboxI18nPrev+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'})});